\input cwebmac
\srcloctrue
\datethis

\N[2 topswops.w]{1}{1}Intro. Pepperdine's method for topswops. [Reference: {\sl
Mathematical
Gazette\/ \bf73} (1989), 131--133.]

\Y\B\4\D$\|n$ \5
\T{15}\C{ degree of perms; should be less than 16 }\par
\B\4\D$\\{maxl}$ \5
\T{1000}\C{ max level }\par
\Y\B\8\#\&{include} \.{<stdio.h>}\6
\&{typedef} \&{struct} ${}\{{}$\1\6
\&{char} \|p[\T{16}];\2\6
${}\}{}$ \&{perm};\C{ this speeds it up by better than 2 }\6
\&{perm} \|a[\\{maxl}];\6
\&{perm} \|b[\\{maxl}];\6
\&{char} \|x[\\{maxl}];\7
\\{main}(\,)\1\1\2\2\6
${}\{{}$\1\6
\&{register} \&{int} \|j${},{}$ \|k${},{}$ \|l${},{}$ \|m;\7
${}\|a[\T{0}].\|p[\T{0}]\K\T{1};{}$\6
${}\|m\K\|l\K\T{0};{}$\6
\4\\{tryit}:\5
${}\|k\K\PP\|x[\|l];{}$\6
\&{if} ${}(\|k<\|n){}$\5
${}\{{}$\1\6
\&{if} ${}(\|a[\|l].\|p[\|k]\E\T{0}){}$\5
${}\{{}$\1\6
\&{if} ${}(\|b[\|l].\|p[\|k+\T{1}]\I\T{0}){}$\1\5
\&{goto} \\{tryit};\2\6
\4${}\}{}$\5
\2\&{else} \&{if} ${}(\|a[\|l].\|p[\|k]\I\|k+\T{1}){}$\1\5
\&{goto} \\{tryit};\2\6
${}\|a[\|l+\T{1}]\K\|a[\|l];{}$\6
\&{for} ${}(\|j\K\T{1};{}$ ${}\|j\Z\|k;{}$ ${}\|j\PP){}$\1\5
${}\|a[\|l+\T{1}].\|p[\|j]\K\|a[\|l].\|p[\|k-\|j];{}$\2\6
${}\|b[\|l+\T{1}]\K\|b[\|l];{}$\6
${}\|a[\|l+\T{1}].\|p[\T{0}]\K\|k+\T{1},\39\|b[\|l+\T{1}].\|p[\|k+\T{1}]\K%
\T{1};{}$\6
\&{if} ${}(\|l\G\|m){}$\5
${}\{{}$\1\6
${}\|m\K\|l;{}$\6
${}\\{printf}(\.{"\%d:"},\39\|m+\T{1});{}$\6
\&{for} ${}(\|j\K\T{0};{}$ ${}\|j<\|n;{}$ ${}\|j\PP){}$\1\5
${}\\{printf}(\.{"\ \%d"},\39\|a[\|l+\T{1}].\|p[\|j]);{}$\2\6
\\{printf}(\.{"\\n"});\6
\4${}\}{}$\2\6
${}\|l\PP;{}$\6
${}\|x[\|l]\K\T{0};{}$\6
\&{goto} \\{tryit};\6
\4${}\}{}$\2\6
${}\|l\MM;{}$\6
\&{if} ${}(\|l\G\T{0}){}$\1\5
\&{goto} \\{tryit};\2\6
\4${}\}{}$\2\par
\fi

\N[42 topswops.w]{1}{2}Index.


\fi


\inx
\fin
\con
